# Supabaseデータベースセットアップ

## スキーマの適用方法

1. Supabaseダッシュボードにアクセス: https://app.supabase.com/project/qxftwxkpeqvlukjybnfp

2. 左メニューから「SQL Editor」を選択

3. `schema.sql` の内容をコピーして実行

## サンプルデータの投入

開発・テスト用のサンプルデータが用意されています：

1. SQL Editorで `sample_data.sql` の内容をコピーして実行

**サンプルデータの内容**:
- 従業員10名（システム開発部、営業、設計、工事など）
- 業者6社（設計事務所、構造事務所、水道業者など）
- 顧客5組（様々な家族構成）
- 案件5件（契約前〜完了まで様々なステータス）
- 入金データ20件
- タスク15件
- 通知3件
- 監査ログ3件

## 認証なしで開発する場合

現在は認証をバイパスしているため、Supabaseの認証設定なしでも動作します。
本番環境では `src/App.tsx` で認証を有効化してください。

## データベース構造

- **employees**: 従業員情報
- **vendors**: 業者情報
- **customers**: 顧客情報（複数氏名対応）
- **projects**: 案件情報
- **payments**: 入金情報
- **tasks**: タスク（イベント）
- **attachments**: 添付ファイル
- **audit_logs**: 監査ログ
- **notifications**: 通知

## Row Level Security (RLS)

すべてのテーブルでRLSが有効化されています。
認証されたユーザーは基本的に全データにアクセス可能です。
必要に応じてポリシーをカスタマイズしてください。
