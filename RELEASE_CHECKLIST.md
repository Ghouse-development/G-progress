# G-progress 全社・フランチャイズリリース工程表

## 📋 プロジェクト概要

**目的**: 株式会社Gハウス全社およびフランチャイズへの本番リリース
**対象ユーザー**: 全従業員（営業、設計、工事、事務など）+ フランチャイズ加盟店
**作成日**: 2025-10-20

---

## 🎯 総合進捗率: 65%

### 全体スケジュール
- **総所要日数**: 約25-30日（3.5-4週間）
- **開発完了目標**: 2025年11月中旬
- **本番リリース目標**: 2025年11月下旬

---

## 📊 フェーズ別進捗

| フェーズ | 進捗率 | 所要日数 | 担当 |
|---------|--------|---------|------|
| 1. フロントエンド開発 | 70% | 10-12日 | 開発者 |
| 2. バックエンド整備 | 80% | 5-7日 | 開発者 |
| 3. インフラ・デプロイ | 40% | 5-6日 | 開発者/インフラ |
| 4. セキュリティ対策 | 50% | 3-4日 | 開発者 |
| 5. テスト | 20% | 4-5日 | 開発者/QA |
| 6. ドキュメント作成 | 30% | 2-3日 | 開発者 |
| 7. 運用準備 | 10% | 2-3日 | 運用チーム |

---

## 🖥️ フェーズ1: フロントエンド開発 (70%完了)

### ✅ 実装済み (70%)

#### コア機能
- [x] ログイン画面
- [x] ダッシュボード（NewDashboard）
- [x] 案件一覧（ProjectList）
- [x] 案件詳細（ProjectDetail + ProjectDetailFields）
- [x] カレンダー表示
- [x] 入金管理（PaymentManagement）
- [x] 性能管理（PerformanceManagement）
- [x] 監査ログ（AuditLogs）

#### マスタ管理
- [x] 商品マスタ（ProductMaster）
- [x] タスクマスタ（TaskMasterManagement）
- [x] 役職マスタ（RoleMaster）
- [x] 部門マスタ（DepartmentMaster）
- [x] 拠点マスタ（BranchMaster）
- [x] 従業員マスタ（EmployeeMaster）
- [x] トリガーマスタ（TriggerMaster）

#### UI/UX
- [x] Prismaスタイルモーダル統一
- [x] レスポンシブデザイン
- [x] トースト通知
- [x] ローディング表示
- [x] Apple調モノクロデザイン

#### データ連携
- [x] CSVインポート機能（CSVImportModal）
- [x] Supabaseとのリアルタイム連携
- [x] コメント機能（CommentSection）

### ⚠️ 未実装・要改善 (30%)

#### 必須機能 (所要: 6-8日)
- [ ] **モード切替機能** (2日)
  - 担当者モード
  - 拠点モード
  - 全社モード
  - フィルタリングロジック実装

- [ ] **年度選択機能** (1日)
  - 年度プルダウン
  - 8月～翌7月のフィルタリング

- [ ] **権限管理の強化** (2日)
  - 役割ベースのアクセス制御（RBAC）
  - 画面・ボタンの表示制御
  - 編集権限チェック

- [ ] **エラーハンドリング** (1-2日)
  - グローバルエラーバウンダリ
  - APIエラーの統一ハンドリング
  - ユーザーフレンドリーなエラーメッセージ

- [ ] **バリデーション強化** (1日)
  - フォーム入力検証
  - 必須項目チェック
  - データ整合性チェック

#### 推奨機能 (所要: 2-4日)
- [ ] **検索・フィルタ機能** (1-2日)
  - グローバル検索
  - 詳細フィルタ
  - ソート機能

- [ ] **一括操作機能** (1日)
  - 複数選択
  - 一括削除
  - 一括ステータス変更

- [ ] **エクスポート機能** (1日)
  - Excel出力
  - PDF出力
  - レポート生成

---

## 🗄️ フェーズ2: バックエンド整備 (80%完了)

### ✅ 実装済み (80%)

- [x] Supabaseプロジェクト設定
- [x] データベーススキーマ
  - employees, customers, projects, tasks
  - payments, vendors, notifications
  - audit_logs, task_masters, products
  - roles, departments, branches, triggers
- [x] RLSポリシー（基本設定）
- [x] マイグレーションファイル（13個）
- [x] タスクマスタ95件投入SQL

### ⚠️ 未実装・要改善 (20%)

#### 必須作業 (所要: 3-4日)
- [ ] **RLSポリシーの包括的実装** (2日)
  - 全テーブルのRLS設定確認
  - 役割ベースのポリシー追加
  - テスト実行

- [ ] **インデックス最適化** (1日)
  - パフォーマンス分析
  - 頻繁に検索されるカラムへのインデックス追加
  - 複合インデックスの設定

- [ ] **データバックアップ設定** (半日)
  - 自動バックアップ設定
  - リストア手順の文書化

- [ ] **マイグレーション整理** (半日)
  - 重複マイグレーションの統合
  - マイグレーション順序の整理

#### 推奨作業 (所要: 2-3日)
- [ ] **ストアドプロシージャ作成** (1-2日)
  - 複雑なビジネスロジックのDB移行
  - パフォーマンス向上

- [ ] **データバリデーション関数** (1日)
  - DB側でのデータ整合性チェック
  - トリガー関数の追加

---

## 🚀 フェーズ3: インフラ・デプロイ (40%完了)

### ✅ 実装済み (40%)

- [x] Viteビルド設定
- [x] 環境変数管理（.env）
- [x] Vercel連携（一部）

### ⚠️ 未実装・要改善 (60%)

#### 必須作業 (所要: 4-5日)
- [ ] **本番環境構築** (2日)
  - Vercel本番プロジェクト作成
  - カスタムドメイン設定
  - HTTPS設定
  - 環境変数設定（本番用）

- [ ] **CI/CDパイプライン** (1-2日)
  - GitHub Actions設定
  - 自動テスト実行
  - 自動デプロイ設定
  - ビルドキャッシュ最適化

- [ ] **モニタリング設定** (1日)
  - エラートラッキング（Sentry等）
  - パフォーマンスモニタリング
  - アラート設定

- [ ] **CDN・キャッシュ最適化** (半日)
  - 静的アセットのCDN配信
  - キャッシュ戦略の設定

#### 推奨作業 (所要: 1日)
- [ ] **ステージング環境** (1日)
  - 本番と同等のステージング環境構築
  - テスト用データ投入

---

## 🔒 フェーズ4: セキュリティ対策 (50%完了)

### ✅ 実装済み (50%)

- [x] Supabase認証基盤
- [x] RLS基本設定
- [x] 環境変数による秘密情報管理

### ⚠️ 未実装・要改善 (50%)

#### 必須作業 (所要: 2-3日)
- [ ] **認証フロー強化** (1日)
  - メール認証
  - パスワードリセット
  - セッション管理
  - 自動ログアウト

- [ ] **XSS/CSRF対策** (1日)
  - Content Security Policy設定
  - CSRFトークン実装
  - 入力サニタイゼーション

- [ ] **セキュリティヘッダー** (半日)
  - HSTS設定
  - X-Frame-Options
  - X-Content-Type-Options

- [ ] **APIレート制限** (半日)
  - Supabase側でのレート制限設定
  - フロント側のリトライロジック

#### 推奨作業 (所要: 1日)
- [ ] **セキュリティ監査** (1日)
  - 脆弱性スキャン
  - 依存パッケージのセキュリティチェック
  - ペネトレーションテスト

---

## 🧪 フェーズ5: テスト (20%完了)

### ✅ 実装済み (20%)

- [x] Vitest環境設定
- [x] Testing Library設定
- [x] サンプルテスト（NotificationCenter.test.tsx）

### ⚠️ 未実装・要改善 (80%)

#### 必須作業 (所要: 3-4日)
- [ ] **ユニットテスト** (2日)
  - コンポーネントテスト（カバレッジ60%以上）
  - ユーティリティ関数テスト
  - hooks テスト

- [ ] **統合テスト** (1日)
  - ページ遷移テスト
  - API連携テスト
  - 認証フローテスト

- [ ] **E2Eテスト** (1日)
  - クリティカルパステスト
  - ユーザーシナリオテスト
  - ブラウザ互換性テスト

#### 推奨作業 (所要: 1日)
- [ ] **負荷テスト** (1日)
  - 同時接続テスト
  - データ量テスト
  - パフォーマンスベンチマーク

---

## 📚 フェーズ6: ドキュメント作成 (30%完了)

### ✅ 実装済み (30%)

- [x] CLAUDE.md（プロジェクト概要）
- [x] REQUIREMENTS.md（要件定義）
- [x] README.md（基本情報）
- [x] DISASTER_RECOVERY.md（災害復旧）

### ⚠️ 未実装・要改善 (70%)

#### 必須作業 (所要: 2-3日)
- [ ] **ユーザーマニュアル** (1日)
  - 画面別操作説明
  - FAQ
  - トラブルシューティング

- [ ] **管理者マニュアル** (1日)
  - マスタ管理手順
  - ユーザー管理手順
  - バックアップ・リストア手順

- [ ] **開発者ドキュメント** (半日)
  - アーキテクチャ図
  - API仕様書
  - デプロイ手順

- [ ] **研修資料** (半日)
  - 操作動画
  - ハンズオン資料
  - チートシート

---

## 👥 フェーズ7: 運用準備 (10%完了)

### ✅ 実装済み (10%)

- [x] 監査ログ機能

### ⚠️ 未実装・要改善 (90%)

#### 必須作業 (所要: 2-3日)
- [ ] **初期データ投入** (1日)
  - 従業員マスタ
  - 部門・拠点マスタ
  - 商品マスタ
  - タスクマスタ95件

- [ ] **ユーザートレーニング** (1日)
  - 管理者研修
  - 一般ユーザー研修
  - 質疑応答

- [ ] **運用マニュアル** (半日)
  - 日次作業手順
  - 月次作業手順
  - インシデント対応手順

- [ ] **サポート体制構築** (半日)
  - 問い合わせ窓口設定
  - エスカレーションフロー
  - FAQ更新プロセス

---

## 📅 詳細スケジュール（推奨）

### Week 1 (5日間)
- **Day 1-2**: フロントエンド必須機能（モード切替、年度選択）
- **Day 3**: バックエンド（RLSポリシー強化）
- **Day 4**: セキュリティ対策（認証フロー強化）
- **Day 5**: エラーハンドリング、バリデーション

### Week 2 (5日間)
- **Day 6-7**: テスト（ユニット、統合）
- **Day 8**: インフラ（本番環境構築）
- **Day 9**: CI/CDパイプライン
- **Day 10**: モニタリング設定

### Week 3 (5日間)
- **Day 11**: E2Eテスト
- **Day 12**: ドキュメント作成（ユーザーマニュアル）
- **Day 13**: ドキュメント作成（管理者マニュアル）
- **Day 14**: 初期データ投入
- **Day 15**: ユーザートレーニング準備

### Week 4 (5日間)
- **Day 16-17**: 総合テスト
- **Day 18**: セキュリティ監査
- **Day 19**: ユーザートレーニング実施
- **Day 20**: 本番リリース

### バッファ (5-10日)
- 予期せぬ問題対応
- 追加要望対応
- 最終調整

---

## 🚨 リスクと対策

### 高リスク項目
1. **データマイグレーション**
   - リスク: 既存データの移行失敗
   - 対策: 段階的移行、ロールバック手順準備

2. **パフォーマンス問題**
   - リスク: 大量データでの動作遅延
   - 対策: 負荷テスト実施、インデックス最適化

3. **ユーザー受容**
   - リスク: 操作が難しく使われない
   - 対策: 事前トレーニング、UI/UX改善

### 中リスク項目
1. **ブラウザ互換性**
   - リスク: 特定ブラウザで動作不良
   - 対策: クロスブラウザテスト実施

2. **セキュリティ脆弱性**
   - リスク: 情報漏洩リスク
   - 対策: セキュリティ監査、定期的な脆弱性スキャン

---

## ✅ リリース判定基準

### 必須条件（Must Have）
- [ ] 全ての必須機能が実装済み
- [ ] ユニットテストカバレッジ60%以上
- [ ] E2Eテストでクリティカルパスが全て通過
- [ ] セキュリティ監査でクリティカルな問題なし
- [ ] ユーザーマニュアル完成
- [ ] 初期データ投入完了
- [ ] ユーザートレーニング実施完了

### 推奨条件（Should Have）
- [ ] ユニットテストカバレッジ80%以上
- [ ] 負荷テスト実施済み
- [ ] ステージング環境でのテスト完了
- [ ] 全ドキュメント完成
- [ ] サポート体制構築完了

---

## 📊 工数見積もり（レガシーエンジニア換算）

### 総工数
- **実装済み**: 約30-35人日
- **残作業**: 約25-30人日
- **総計**: 約55-65人日

### フェーズ別工数
1. フロントエンド: 20-24人日（実装済み: 14人日、残: 6-10人日）
2. バックエンド: 10-12人日（実装済み: 8人日、残: 2-4人日）
3. インフラ: 8-10人日（実装済み: 3人日、残: 5-7人日）
4. セキュリティ: 5-6人日（実装済み: 2.5人日、残: 2.5-3.5人日）
5. テスト: 6-8人日（実装済み: 1人日、残: 5-7人日）
6. ドキュメント: 4-5人日（実装済み: 1人日、残: 3-4人日）
7. 運用準備: 3-4人日（実装済み: 0.5人日、残: 2.5-3.5人日）

---

## 🎯 次のアクションアイテム

### 即座に着手すべき項目（優先度: 高）
1. モード切替機能の実装
2. 年度選択機能の実装
3. RLSポリシーの包括的実装
4. エラーハンドリングの統一
5. 本番環境の構築

### 1週間以内に着手すべき項目（優先度: 中）
6. ユニットテストの実装
7. CI/CDパイプラインの構築
8. ユーザーマニュアルの作成
9. 初期データの投入
10. セキュリティ監査の実施

---

## 📞 問い合わせ・エスカレーション

**技術的質問**: 開発チーム
**要件確認**: プロダクトオーナー
**リリース判断**: 経営層

---

**最終更新**: 2025-10-20
**次回レビュー**: 2025-10-22
