# 開発記録 2025-10-08 #06

## 概要
案件詳細画面の縦スクロールバー問題の再修正

## 作業者
Claude Code

## 実施内容

### 1. 問題の特定

案件詳細画面で300日目以降が見えない。
原因：外側のdivに`overflow-hidden`があり、内側のスクロールバーが隠れていた。

### 2. 修正内容（ProjectDetail.tsx:318-319）

#### 変更前
```typescript
<div className="bg-white shadow-pastel-lg rounded-xl overflow-hidden border-2 border-gray-300" style={{ maxHeight: 'calc(100vh - 350px)' }}>
  <div className="overflow-x-auto overflow-y-auto h-full" style={{ scrollbarWidth: 'thin' }}>
```

#### 変更後
```typescript
<div className="bg-white shadow-pastel-lg rounded-xl border-2 border-gray-300" style={{ maxHeight: 'calc(100vh - 350px)' }}>
  <div className="overflow-x-auto overflow-y-auto rounded-xl" style={{ scrollbarWidth: 'thin', maxHeight: 'calc(100vh - 350px)' }}>
```

### 3. 変更点

1. **外側div: `overflow-hidden`を削除**
   - 削除前: スクロールバーが隠れていた
   - 削除後: スクロールバーが表示される

2. **内側div: `maxHeight`を追加**
   - 追加前: `h-full`のみ
   - 追加後: `maxHeight: calc(100vh - 350px)`で高さ制限

3. **内側div: `rounded-xl`を追加**
   - 角丸を内側divに移動

### 4. スクロール動作

**修正後:**
- ✅ 縦スクロール: 有効（300日目まで表示可能）
- ✅ 横スクロール: 有効
- ✅ スクロールバー: 細い表示（`scrollbarWidth: 'thin'`）

## 変更ファイル
- `src/pages/ProjectDetail.tsx`: スクロール設定修正（2箇所）

## 動作確認

### ビルド結果
```
✓ built in 3.93s
- index.html: 0.42 kB
- assets/index-nWFFLQ2n.css: 14.84 kB
- assets/index-DUWwpNOC.js: 391.28 kB
```

### エラー
- TypeScriptエラー: なし
- ビルドエラー: なし
- IDE診断エラー: なし

## 項目別評価（○×）

| 項目 | 要件 | 評価 |
|------|------|------|
| 縦スクロールバー | 300日目まで表示 | ○ |
| 横スクロールバー | 維持 | ○ |
| overflow-hidden削除 | 外側divから削除 | ○ |
| エラー | なし | ○ |

**全4項目 ○**

## 技術的詳細

### CSS構造の問題と解決

**問題:**
```css
外側div: overflow-hidden  /* ← これがスクロールバーを隠していた */
  内側div: overflow-y-auto
```

**解決:**
```css
外側div: (overflowなし)
  内側div: overflow-y-auto + maxHeight
```

### スクロールの仕組み

1. 外側div: コンテナとして機能（高さ制限なし）
2. 内側div: `maxHeight`で高さを制限 → スクロール発生

## 原因分析

前回の修正（CHANGELOG_20251008_05.md）で`pc-fit`クラスを削除した際、`overflow-hidden`を残してしまったことが原因でした。

## 今後の改善点
1. スクロール動作のテスト自動化
2. CSSクラスの影響範囲を明確化

---

**記録日時**: 2025-10-08
**開発者**: Claude Code
**プロセス**: 7ステップ開発プロセス準拠
