# 要件定義書: システム構想ツリー機能

## 1. 概要

G-progressは株式会社Gハウスの建設プロジェクト管理システムとして開始し、将来的に**会社全体の基幹システム**として6つの事業を包括する総合経営管理システムへと発展する構想です。

この要件定義書では、設定画面に実装された「今後の構想」ツリー図機能について説明します。

## 2. 目的

- 経営陣や従業員に対して、G-progressの全体像と将来展望を視覚的に提示する
- 他社へのプレゼンテーション時に、システムの包括性と拡張性を効果的にアピールする
- 現在実装済みの機能と今後計画中の機能を明確に区別して表示する
- 会社全体のDX推進における中核システムとしての位置付けを明示する

## 3. 機能要件

### 3.1 アクセス方法

- **場所**: 設定画面（`/settings`）
- **トリガー**: 「今後の構想を見る」ボタンをクリック
- **表示形式**: モーダルウィンドウ

### 3.2 ツリー構造の設計

#### レベル1: ルートノード
- **名称**: G-progress
- **サブタイトル**: 総合経営管理システム
- **デザイン**: グラデーション背景（青→紫）、白文字、太いボーダー

#### レベル2: 6つの事業部門（横並び展開）

1. **注文住宅事業** （実装中）
   - ステータス: 緑色バッジ「実装中」（アニメーション付き）
   - さらに詳細展開あり（レベル3）

2. **不動産事業** （予定）
   - ステータス: グレーバッジ「予定」
   - 透明度70%

3. **外構事業** （予定）
   - ステータス: グレーバッジ「予定」
   - 透明度70%

4. **賃貸管理事業** （予定）
   - ステータス: グレーバッジ「予定」
   - 透明度70%

5. **リフォーム事業** （予定）
   - ステータス: グレーバッジ「予定」
   - 透明度70%

6. **BtoB事業** （予定）
   - ステータス: グレーバッジ「予定」
   - 透明度70%

#### レベル3: 注文住宅事業の詳細展開（右方向に展開）

##### 実装済み機能
- 案件管理
- タスク管理
- 入金管理
- 粗利益管理
- 性能管理

##### 計画中機能
- ミスロス報告
- 発注・積算
- オプション管理
- キャンペーン情報

#### レベル2.5: 全社共通（6事業と同じ階層）

7. **全社共通** （実装中）
   - ステータス: 緑色バッジ「実装中」（アニメーション付き）
   - さらに詳細展開あり（レベル3）

##### 実装済み機能
- 従業員管理
- 承認フロー

### 3.3 ビジュアルデザイン要件

#### デザインスタイル
- **Prismaテーマ**: 全体のデザインはPrisma design systemに準拠
- **レイアウト**: 横型ツリー構造（左から右へ展開）
- **接続線**: グレー（ダークモード対応）
- **カラーコーディング**:
  - 実装中: 緑色（`border-green-500`, `bg-green-50`, `text-green-800`）
  - 予定: グレー（`border-gray-400`, `bg-gray-50`, `text-gray-700`）

#### レスポンシブ対応
- モーダル最大幅: 1400px
- モーダル最大高さ: 90vh
- 横スクロール対応（`overflow-x-auto`）
- ダークモード対応

### 3.4 インタラクション要件

- モーダル外クリックで閉じる
- 「閉じる」ボタン（右上のXアイコン、フッターの閉じるボタン）
- アニメーション: 実装中バッジにパルスアニメーション（`animate-pulse`）

## 4. 非機能要件

### 4.1 パフォーマンス
- モーダルの開閉は即座に反応
- ツリー図の描画は遅延なく完了

### 4.2 アクセシビリティ
- 大きな文字サイズ（最小でもtext-base）
- 高コントラスト（Prismaテーマの太いボーダー）
- ダークモード対応で目の疲労軽減

### 4.3 保守性
- コンポーネント: `src/pages/Settings.tsx`
- 将来的に事業が増えた場合、容易に追加可能な構造
- 実装状況の変更が簡単（バッジの色とステータスを変更するだけ）

## 5. システムアーキテクチャ

### 5.1 技術スタック
- **フロントエンド**: React + TypeScript
- **スタイリング**: Tailwind CSS + Prisma custom classes
- **アイコン**: Lucide React（Sparkles, X）
- **状態管理**: React useState

### 5.2 実装ファイル
- `src/pages/Settings.tsx` (行179-385)
  - モーダル表示状態: `const [showRoadmap, setShowRoadmap] = useState(false)`
  - ボタン: 「今後の構想を見る」（Sparklesアイコン付き）
  - モーダル本体: 横型ツリー構造のJSX

## 6. 将来展望

### 6.1 フェーズ計画

**第1フェーズ（現在）**: 注文住宅事業の基盤機能構築
- 案件管理、タスク管理、入金管理、性能管理

**第2フェーズ（短期）**: 注文住宅事業の拡張機能
- 承認フロー、ミスロス報告、発注・積算、オプション管理、キャンペーン情報

**第3フェーズ（中期）**: 他事業部門への展開
- 不動産事業、外構事業、賃貸管理事業、リフォーム事業、BtoB事業

### 6.2 システム統合ビジョン

G-progressは最終的に以下を実現する総合経営管理システムとなります：

1. **データ統合**: 全事業部門のデータを一元管理
2. **業務効率化**: 部門間の情報共有と連携を促進
3. **経営判断支援**: リアルタイムなダッシュボードと分析機能
4. **顧客体験向上**: 全サービスラインでの一貫した顧客管理
5. **スケーラビリティ**: 新規事業追加時の柔軟な拡張性

## 7. プレゼンテーション活用

### 7.1 対象者
- 社内経営陣（システム投資の妥当性説明）
- 社内従業員（システムの全体像理解、モチベーション向上）
- 他社（同業他社や関連企業へのシステム提案）
- 投資家・パートナー（事業拡大計画の説明）

### 7.2 効果的な見せ方
1. デモモードで設定画面を開く
2. 「今後の構想を見る」ボタンをクリック
3. 横型ツリー構造で全体像を提示
4. 実装済み機能を強調（緑色バッジ、パルスアニメーション）
5. 計画中機能を説明（グレーバッジ、将来性をアピール）
6. フェーズ情報カードで段階的な展開計画を説明

## 8. メンテナンス手順

### 8.1 ステータス更新方法

機能の実装が完了した際の更新手順：

1. `src/pages/Settings.tsx` を開く
2. 該当機能のバッジを変更:
   ```tsx
   // 変更前（計画中）
   <span className="prisma-badge prisma-badge-gray">予定</span>

   // 変更後（実装中）
   <span className="prisma-badge prisma-badge-green animate-pulse">実装中</span>
   ```

3. カードのスタイルを変更:
   ```tsx
   // 変更前
   className="prisma-card opacity-70"

   // 変更後
   className="prisma-card border-3 border-green-500 shadow-xl"
   ```

### 8.2 新規事業追加方法

1. 6事業の下に新しい事業divを追加
2. 縦幹線（`absolute left-0 top-0 bottom-0`）の範囲を調整
3. 横接続線と事業カードを同様のパターンで実装
4. フェーズ情報を更新

## 9. デザインガイドライン

### 9.1 基本原則

**最重要**: すべてのコンポーネントで**Prismaデザインコードを常に意識**すること

- 大きく明確な文字サイズ（最小text-base、タイトルはtext-xl以上）
- 太いボーダー（border-3またはborder-4）を使用
- はっきりとした色使い（グラデーションよりもソリッドカラーを優先）
- 十分な余白とパディング
- クリック可能な要素は明確にホバーエフェクトを表示
- ユニバーサルデザイン（高齢者でも見やすい）

### 9.2 Prismaテーマ準拠

- `prisma-card`: カード基本スタイル
- `prisma-badge-green`: 実装中バッジ
- `prisma-badge-gray`: 予定バッジ
- `prisma-btn-primary`: メインボタン
- `prisma-modal-overlay`: モーダル背景
- `prisma-modal`: モーダル本体
- `prisma-modal-header`: モーダルヘッダー
- `prisma-modal-content`: モーダルコンテンツ
- `prisma-modal-footer`: モーダルフッター

### 9.2 カラーパレット

| 要素 | ライトモード | ダークモード |
|------|------------|-------------|
| ルートノード背景 | グラデーション（青→紫） | グラデーション（青→紫） |
| 実装中カード | `bg-green-50`, `border-green-500` | `bg-green-900/20`, `border-green-500` |
| 予定カード | `bg-white`, `border-gray-300` | `bg-gray-800`, `border-gray-600` |
| 接続線 | `bg-gray-600` | `bg-gray-400` |
| フェーズ情報背景 | `from-blue-50 to-purple-50` | `from-gray-800 to-gray-700` |

## 10. 承認・変更履歴

| 日付 | バージョン | 変更内容 | 承認者 |
|------|----------|---------|-------|
| 2025-10-21 | 1.0 | 初版作成 | - |

---

**文書管理**
- ファイル名: `要件定義書_システム構想ツリー.md`
- 保存場所: `C:\claudecode\G-progress\docs\`
- 関連ファイル: `src/pages/Settings.tsx`
