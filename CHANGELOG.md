# 開発記録 (Changelog)

このファイルは、G-progressプロジェクトの開発変更履歴を記録します。

## [未リリース] - 2025-10-23

### タスクマスタ管理機能の改善

#### 追加
- **トリガー設定バッジ**: トリガー設定がONのタスクに青いバッジ「トリガー」を表示
- **トリガーからの日数列**: 新しい列を追加し、トリガーからの相対日数を表示
  - プラス値（+5日など）: 緑色のバッジ
  - マイナス値（-3日など）: オレンジ色のバッジ
- **フェーズの整理**: 5つのフェーズに統一（内定、契約前、着工前、着工後、引き渡し後）

#### 改善
- **レスポンシブデザイン**: スマホ・タブレット対応を改善
  - 横スクロール対応でテーブル全体を表示
  - 中画面以下では「目的」列を非表示にして見やすく
  - パディングを調整（px-6 → px-4）
- **トリガー機能UI**: 青・緑のボックスで視覚的に分離
  - 「トリガー設定の有無」: 青いボックス
  - 「トリガーを設定する」: 緑のボックス
- **エラーハンドリング**: 詳細なエラーログ出力を追加

#### 修正
- **データベーススキーマ**: task_mastersテーブルの完全な再構築
  - 不足していたカラム（dos, donts, manual_url等）を追加
  - トリガー機能のカラム（is_trigger_task, trigger_task_id, days_from_trigger）を追加
  - 関連タスクのカラム（related_task_master_ids）を追加

#### データベースマイグレーション
- `FINAL_FIX_task_masters.sql`: 完全なテーブル再作成SQL
- `203_add_missing_task_master_columns.sql`: 不足カラム追加SQL
- `202_add_trigger_fields_to_task_masters.sql`: トリガーフィールド追加SQL

#### ファイル変更
- `src/pages/TaskMasterManagement.tsx`: テーブルUIの大幅な改善
- `src/constants/organizationHierarchy.ts`: 組織階層定義の追加
- `src/types/database.ts`: TaskMaster型の更新

---

## 開発ガイドライン

### コミットメッセージ形式
- feat: 新機能
- fix: バグ修正
- docs: ドキュメント
- style: コードスタイル
- refactor: リファクタリング
- test: テスト
- chore: その他

### ブランチ戦略
- `master`: 本番環境
- `develop`: 開発環境
- `feature/*`: 機能開発
- `fix/*`: バグ修正

---

## 今後の予定

### 優先度: 高
- [ ] タスクマスタのトリガー機能の実装完了
- [ ] プロジェクト詳細画面でのトリガータスク連動
- [ ] モバイル対応の完全化

### 優先度: 中
- [ ] タスクマスタのインポート/エクスポート機能
- [ ] タスクマスタのバージョン管理

### 優先度: 低
- [ ] タスクマスタのテンプレート機能
- [ ] タスクマスタのカテゴリ管理
